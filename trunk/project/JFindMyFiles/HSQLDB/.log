CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table TBL_AUDIO (AUDIO_ID bigint generated by default as identity (start with 1), data varbinary(255), FILE_ID bigint not null, primary key (AUDIO_ID), unique (FILE_ID))
create table TBL_DISK_GROUP (GROUP_ID bigint generated by default as identity (start with 1), name varchar(255), description varchar(255), capacity bigint, PARENT_ID bigint, primary key (GROUP_ID))
create table TBL_FILE (FILE_ID bigint generated by default as identity (start with 1), name varchar(255), absolutePath varchar(255), lastModified bigint, description varchar(255), hidden bit, size bigint, extension varchar(255), file bit, folder bit, MEDIA_ID bigint not null, PARENT_ID bigint, primary key (FILE_ID))
create table TBL_GROUP_MEDIA (MEDIA_ID bigint not null, GROUP_ID bigint not null, primary key (GROUP_ID, MEDIA_ID))
create table TBL_IMAGE (IMAGE_ID bigint generated by default as identity (start with 1), data varbinary(255), FILE_ID bigint not null, primary key (IMAGE_ID), unique (FILE_ID))
create table TBL_LABEL (LABEL_ID bigint generated by default as identity (start with 1), name varchar(255), primary key (LABEL_ID))
create table TBL_LOAN (LOAN_ID bigint generated by default as identity (start with 1), loaned date, returned date, MEDIA_ID bigint not null, USER_ID bigint not null, primary key (LOAN_ID))
create table TBL_MEDIA (MEDIA_ID bigint generated by default as identity (start with 1), name varchar(255), capacity bigint, lastModified bigint, description varchar(255), freeSpace bigint, location varchar(255), TYPE_ID bigint not null, primary key (MEDIA_ID))
create table TBL_MEDIA_LABEL (MEDIA_ID bigint not null, LABEL_ID bigint not null, primary key (MEDIA_ID, LABEL_ID))
create table TBL_PROPERTIES (PROPERTIES_ID bigint generated by default as identity (start with 1), name varchar(255), description varchar(255), totalSize bigint, diskNumber integer, totalFiles bigint, totalFolders bigint, creationDate date, primary key (PROPERTIES_ID))
create table TBL_TYPE (TYPE_ID bigint generated by default as identity (start with 1), name varchar(255), primary key (TYPE_ID))
create table TBL_USER (USER_ID bigint generated by default as identity (start with 1), firstname varchar(255), surname varchar(255), primary key (USER_ID))
create table TBL_VIDEO (VIDEO_ID bigint generated by default as identity (start with 1), data varbinary(255), FILE_ID bigint not null, primary key (VIDEO_ID), unique (FILE_ID))
alter table TBL_AUDIO add constraint FKC8B39BD5107E5D18 foreign key (FILE_ID) references TBL_FILE
alter table TBL_DISK_GROUP add constraint FK22CF407E338D5F55 foreign key (PARENT_ID) references TBL_DISK_GROUP
alter table TBL_FILE add constraint FK4049F57DE20ABC5D foreign key (MEDIA_ID) references TBL_MEDIA
alter table TBL_FILE add constraint FK4049F57DBEDB532A foreign key (PARENT_ID) references TBL_FILE
alter table TBL_GROUP_MEDIA add constraint FK59417AC3D6552560 foreign key (GROUP_ID) references TBL_DISK_GROUP
alter table TBL_GROUP_MEDIA add constraint FK59417AC3E20ABC5D foreign key (MEDIA_ID) references TBL_MEDIA
alter table TBL_IMAGE add constraint FKC920A95A107E5D18 foreign key (FILE_ID) references TBL_FILE
alter table TBL_LOAN add constraint FK404CC4F1298F2457 foreign key (USER_ID) references TBL_USER
alter table TBL_LOAN add constraint FK404CC4F1E20ABC5D foreign key (MEDIA_ID) references TBL_MEDIA
alter table TBL_LOAN add constraint FK404CC4F146697D12 foreign key (LOAN_ID) references TBL_USER
alter table TBL_MEDIA add constraint FKC9556FE3FF7AB9F7 foreign key (TYPE_ID) references TBL_TYPE
alter table TBL_MEDIA_LABEL add constraint FK17D6A378E20ABC5D foreign key (MEDIA_ID) references TBL_MEDIA
alter table TBL_MEDIA_LABEL add constraint FK17D6A378A2E3A25D foreign key (LABEL_ID) references TBL_LABEL
alter table TBL_VIDEO add constraint FKC9D6147A107E5D18 foreign key (FILE_ID) references TBL_FILE
SET AUTOCOMMIT FALSE
